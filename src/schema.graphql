mutation AuthLogin($login: String = "", $password: String = "") {
  login_handler(login: $login, password: $password) {
    access_token
  }
}

mutation UpdateToken {
  refreshToken {
    access_token
  }
}

mutation SignUpJobseeker(
  $start_date: date = ""
  $speciality: String = ""
  $role: String = ""
  $phone: String = ""
  $password: String = ""
  $name_institution: String = ""
  $name: String = ""
  $middleName: String = ""
  $login: String = ""
  $lastName: String = ""
  $group: String = ""
  $gender: String = ""
  $faculity: String = ""
  $email: String = ""
  $end_date: date = ""
  $education_form: String = ""
  $dateBirth: date = ""
) {
  signUp_jobseeker(
    education_form: $education_form
    email: $email
    faculity: $faculity
    gender: $gender
    group: $group
    lastName: $lastName
    login: $login
    middleName: $middleName
    name: $name
    name_institution: $name_institution
    password: $password
    phone: $phone
    role: $role
    speciality: $speciality
    dateBirth: $dateBirth
    start_date: $start_date
    end_date: $end_date
  ) {
    account_id
  }
}

mutation SignUpOrganization(
  $email: String = ""
  $inn_organization: String = ""
  $login: String = ""
  $name_employer: String = ""
  $name_organization: String = ""
  $password: String = ""
  $phone: String = ""
  $role: String = ""
) {
  signUp_employer(
    email: $email
    inn_organization: $inn_organization
    login: $login
    name_employer: $name_employer
    name_organization: $name_organization
    password: $password
    phone: $phone
    role: $role
  ) {
    status
  }
}

query GetAccountById($_eq: uuid = "") {
  account(where: { account_id: { _eq: $_eq } }) {
    account_id
    avatar
    login
    role
  }
}

query GetJobseekerById($_eq: uuid = "") {
  jobseeker(where: { account_id: { _eq: $_eq } }) {
    dateBirth
    email
    gender
    jobseeker_id
    lastName
    middleName
    name
    phone
    jobseeker_educations {
      average_score
      education_form
      educational_institution_id
      end_date
      faculity
      group
      speciality
      start_date
      jobseeker_education_id
      jobseeker_education_educational_institution {
        educational_institution_jobseeker_educations {
          average_score
          education_form
          educational_institution_id
          end_date
          faculity
          group
          speciality
          start_date
          jobseeker_id
          jobseeker_education_id
        }
        name_institution
      }
    }
    account_id
    account {
      login
      role
      avatar
    }
  }
}

query GetOrganizationById($_eq: uuid = "") {
  organization(where: { account_id: { _eq: $_eq } }) {
    account_id
    date_registration
    employer_id
    id_organization
    inn_organization
    kpp_organization
    main_activity
    name_organization
    ogrn
    status
    verified
    legal_address
    organization_account {
      avatar
      login
      role
    }
    organization_employer {
      email
      name_employer
      phone
    }
  }
}

mutation UpdateOrganization($_eq: uuid = "", $legal_address: String = "") {
  update_organization(
    where: { account_id: { _eq: $_eq } }
    _set: { legal_address: $legal_address }
  ) {
    returning {
      account_id
      employer_id
      id_organization
      legal_address
    }
  }
}

mutation UpdateEmployer(
  $_eq: uuid = ""
  $email: String = ""
  $phone: String = ""
) {
  update_employer(
    where: { employer_organizations: { account_id: { _eq: $_eq } } }
    _set: { email: $email, phone: $phone }
  ) {
    returning {
      id_employer
      phone
      email
    }
  }
}

mutation UpdateJobseekerProfile(
  $dateBirth: String = ""
  $email: String = ""
  $gender: String = ""
  $lastName: String = ""
  $middleName: String = ""
  $name: String = ""
  $phone: String = ""
  $_eq: uuid = ""
) {
  update_jobseeker(
    where: { account_id: { _eq: $_eq } }
    _set: {
      dateBirth: $dateBirth
      email: $email
      gender: $gender
      lastName: $lastName
      middleName: $middleName
      name: $name
      phone: $phone
    }
  ) {
    returning {
      account_id
      jobseeker_id
    }
  }
}

query GetJobseekerResumes($_eq: uuid = "") {
  resumes(where: { jobseeker_id: { _eq: $_eq } }) {
    jobseeker_id
    resume_id
    resume_name
  }
}

query GetResumes {
  resumes {
    jobseeker_id
    resume_id
    resume_name
  }
}

mutation InsertResume($resume_name: String = "", $jobseeker_id: uuid = "") {
  insert_resumes(
    objects: { resume_name: $resume_name, jobseeker_id: $jobseeker_id }
  ) {
    returning {
      jobseeker_id
      resume_name
      resume_id
    }
  }
}

mutation DeleteResume($resume_id: uuid = "") {
  delete_resumes(where: { resume_id: { _eq: $resume_id } }) {
    affected_rows
  }
}

mutation UpdateResumeName($_eq: uuid = "", $resume_name: String = "") {
  update_resumes(
    where: { resume_id: { _eq: $_eq } }
    _set: { resume_name: $resume_name }
  ) {
    returning {
      resume_id
      resume_name
      jobseeker_id
    }
  }
}

query GetResume($_eq: uuid = "") {
  resumes(where: { resume_id: { _eq: $_eq } }) {
    jobseeker_id
    resume_id
    resume_name
    resume_experience_work {
      date_dismissal
      date_employment
      description
      experience_work_id
      jobposition
      name_company
    }
    resume_project {
      description
      name_organization
      project_id
      project_name
    }
    resume_skill {
      description
      skills_id
    }
    resumes_jobseeker {
      jobseeker_educations {
        average_score
        education_form
        end_date
        faculity
        group
        speciality
        start_date
        jobseeker_education_educational_institution {
          name_institution
        }
        jobseeker_education_course_work {
          course_work_name
          course_work_task
          description
        }
      }
      lastName
      name
      phone
      middleName
      dateBirth
      email
      gender
    }
  }
}

query GetJobseekerContacts($_eq: uuid = "") {
  jobseeker(where: { jobseeker_resumes: { resume_id: { _eq: $_eq } } }) {
    account_id
    dateBirth
    email
    gender
    lastName
    jobseeker_id
    middleName
    name
    phone
  }
}

mutation UpdateContacts(
  $_eq: uuid = ""
  $phone: String = ""
  $email: String = ""
) {
  update_jobseeker(
    where: { account_id: { _eq: $_eq } }
    _set: { phone: $phone, email: $email }
  ) {
    returning {
      phone
      name
      middleName
      lastName
      jobseeker_id
    }
  }
}

mutation InsertWorkExperience(
  $date_dismissal: String = ""
  $date_employment: String = ""
  $description: String = ""
  $jobposition: String = ""
  $name_company: String = ""
  $workLocation: String = ""
) {
  insert_experience_work(
    objects: {
      date_dismissal: $date_dismissal
      date_employment: $date_employment
      description: $description
      jobposition: $jobposition
      name_company: $name_company
      workLocation: $workLocation
    }
  ) {
    returning {
      experience_work_id
      jobposition
      name_company
      date_employment
      description
      date_dismissal
      workLocation
    }
  }
}

mutation UpdateResumeWorkExperience(
  $_eq: uuid = ""
  $experience_work_id: uuid = ""
) {
  update_resumes(
    where: { resume_id: { _eq: $_eq } }
    _set: { experience_work_id: $experience_work_id }
  ) {
    returning {
      resume_id
      experience_work_id
    }
  }
}
